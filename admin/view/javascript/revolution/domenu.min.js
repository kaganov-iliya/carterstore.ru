!function(t,e,n,i){function s(e,i){this.w=t(n),this.el=t(e),this.options=t.extend(!0,{},l,i),this.init()}function o(t,e){if(!t)throw new TypeError("expected object, got "+typeof t);this._plugin=t,this._lists=e}var a="ontouchstart"in n;String.prototype.dot=function(){return"."+this},String.prototype.eachHas=function(t,e,n,i){var s=this,o=[],e=e||", ",n=n||" ",i=i||e,a=t.split(e);return a.forEach(function(t,e){o.push(s+n+t)}),o.join(i)},String.prototype.padLength=function(t,e){for(var n=this;n.length<e;)n=t+n;return n},String.prototype.join=function(t,e){var e="string"==typeof e?e:" ";return this+e+t},Function.prototype.setName=function(t){return Object.defineProperty(this,"name",{get:function(){return t}}),this},Function.prototype.clone=function(){var t=new Function("return "+this.toString())();for(var e in this)t[e]=this[e];return t};var r=function(){var t=n.createElement("div"),i=n.documentElement;if(!("pointerEvents"in t.style))return!1;t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t);var s=e.getComputedStyle&&"auto"===e.getComputedStyle(t,"").pointerEvents;return i.removeChild(t),!!s}(),l={listNodeName:"ol",itemNodeName:"li",rootClass:"dop_menu",listClass:"dop_menu-list",itemClass:"dop_menu-item",itemBlueprintClass:"dop_menu-item-blueprint",dragClass:"dop_menu-dragel",handleClass:"dop_menu-handle",collapsedClass:"dop_menu-collapsed",placeClass:"dop_menu-placeholder",noDragClass:"dop_menu-nodrag",emptyClass:"dop_menu-empty",contentClass:"dop_menu2-content",itemAddBtnClass:"item-add",removeBtnClass:"item-remove",addBtnSelector:"",addBtnClass:"dop_menu-new-item",editBoxClass:"dop_menu-edit-box",inputSelector:"input, select, textarea",collapseBtnClass:"collapse",expandBtnClass:"expand",endEditBtnClass:"end-edit",itemBtnContainerClass:"dop_menu-button-container",itemNameClass:"item-name",data:"",allowListMerging:!0,select2:{support:!1,selectWidth:"50%",params:{}},slideAnimationDuration:300,maxDepth:3,threshold:20,refuseConfirmDelay:2e3,newItemFadeIn:300,event:{onToJson:[],onParseJson:[],onSaveEditBoxInput:[],onItemDrag:[],onItemAddChildItem:[],onItemDrop:[],onItemAdded:[],onItemExpanded:[],onItemCollapsed:[],onItemRemoved:[],onItemStartEdit:[],onItemEndEdit:[],onCreateItem:[],onItemMaxDepth:[],onItemSetParent:[],onItemUnsetParent:[]},paramsDataKey:""};s.prototype={init:function(){var n=this,i=this.options;n.reset(),n.placeEl=t('<div class="'+n.options.placeClass+'"/>'),t.each(this.el.find(n.options.itemNodeName),function(e,i){n.setParent(t(i))}),n.el.on("click","button",function(e){if(!n.dragEl){var i=t(e.currentTarget),s=i.data("action"),o=i.parent(n.options.itemNodeName);"collapse"===s&&n.collapseItem(o),"expand"===s&&n.expandItem(o)}});var s=function(e){var i=t(e.target);if(!i.hasClass(n.options.handleClass)){if(i.closest(n.options.noDragClass.dot()).length)return;i=i.closest(n.options.handleClass.dot())}i.length&&!n.dragEl&&(n.isTouch=/^touch/.test(e.type),n.isTouch&&1!==e.touches.length||(e.preventDefault(),n.dragStart(e.touches?e.touches[0]:e)))},o=function(t){n.dragEl&&(t.preventDefault(),n.dragMove(t.touches?t.touches[0]:t))},r=function(t){n.dragEl&&(t.preventDefault(),n.dragStop(t.touches?t.touches[0]:t))};a&&(n.el[0].addEventListener("touchstart",s,!1),e.addEventListener("touchmove",o,!1),e.addEventListener("touchend",r,!1),e.addEventListener("touchcancel",r,!1)),n.el.on("mousedown",s),n.w.on("mousemove",o),n.w.on("mouseup",r),i.addBtnSelector?this.addNewListItemListener(t(i.addBtnSelector)):this.addNewListItemListener(this.el.find(i.addBtnClass.dot()))},addNewListItemListener:function(e,n){var i=this,s=this.options;e.on("click",function(e){var n=i.el.find(s.listClass.dot()).first(),o=i.createNewListItem();o&&(o.css("display","none"),n.append(o),o.fadeIn(s.newItemFadeIn),i.options.event.onItemAdded.forEach(function(n,i){n(t(o),e)}))})},clickEndEditEventHandler:function(t){var e=this,n=e.options,i=t.find(n.endEditBtnClass.dot()).first();i.on("click",null,{forced:!0},e.keypressEnterEndEditEventHandler.bind(e))},clickStartEditEventHandler:function(e){var n=this.options,i=this,s=t(e.target).parents(n.itemClass.dot()).first();s.find(n.itemNameClass.dot()).first(),s.find(n.inputSelector).first(),s.find(n.itemBtnContainerClass.dot()).first(),s.find(n.editBoxClass.dot()).first();s.data("domenu_clickEndEditEventHandler")!==!0&&(i.clickEndEditEventHandler(s),s.data("domenu_clickEndEditEventHandler",!0)),n.event.onItemStartEdit.forEach(function(t,n){t(s,e)})},resolveToken:function(t,e){if("string"==typeof t){for(var n=t,i=/\{\?[a-z\-\.]+\}/gi,s=n.match(i),o=s&&s.length||0,a=0;o>a;a++)switch(s[a]){case"{?date.gregorian-slashed-DMY}":var r=new Date(Date.now()),l=r.getDay().toString().padLength("0",2)+"/"+r.getMonth().toString().padLength("0",2)+"/"+r.getFullYear();n=n.replace(s[a],l);break;case"{?date.mysql-datetime}":var l=new Date(Date.now());l=l.getUTCFullYear()+"-"+("00"+(l.getUTCMonth()+1)).slice(-2)+"-"+("00"+l.getUTCDate()).slice(-2)+" "+("00"+l.getUTCHours()).slice(-2)+":"+("00"+l.getUTCMinutes()).slice(-2)+":"+("00"+l.getUTCSeconds()).slice(-2),n=n.replace(s[a],l);break;case"{?numeric.increment}":this.incrementIncrement=this.incrementIncrement||1,n=n.replace(s[a],this.incrementIncrement),this.incrementIncrement+=1;break;case"{?value}":n=n.replace(s[a],e.value);break;default:n=t}return n}},saveEditBoxInput:function(e){var n,i=this,s=this.options;e.each(function(e,o){var a=t(o).parents(s.itemClass.dot().join(",").join(s.itemBlueprintClass.dot())).first().data(o.getAttribute("name")),r=t(o).data("default-value")||"";if(n=t(o).parents(s.itemClass.dot()).first(),!a&&!o.value)var l=i.resolveToken(r,t(o));n.data(o.getAttribute("name"),t(o).val()||a||l)}),s.event.onSaveEditBoxInput.forEach(function(t,i){t(n,e)})},keypressEnterEndEditEventHandler:function(e){var n=this,i=this.options,s=t(e.target).parents(i.itemClass.dot()).first(),o=s.find(i.editBoxClass.dot()).first(),a=s.find(i.inputSelector),r=s.find("span").first(),l=s.find(i.itemBtnContainerClass.dot()).first();(13===e.keyCode||e.data&&e.data.forced&&e.data.forced===!0)&&(n.determineAndSetItemTitle(s),""===r.text()&&r.text(n.determineAndSetItemTitle(s)),o.stop().slideUp(i.slideAnimationDuration,function(){n.saveEditBoxInput(a),l.attr("style",""),i.event.onItemEndEdit.forEach(function(n,i){n(t(s),e)}),r.stop().slideDown(i.slideAnimationDuration)}))},resolveInputDataEntryByName:function(e){var n=this.el;opt=this.options,n.find(opt.editBoxClass.dot().join(opt.inputSelector)).each(function(n,i){return i.getAttribute("name")===e?t(i).data("name"):void 0})},setItemTitle:function(t,e){var n=this.options;t.find(n.contentClass.dot().join("span")).first().text(e)},determineAndSetItemTitle:function(t){var e=this,n=this.options,i=t.find(n.inputSelector).first(),s=i.find("option:selected").first().text()||i.text(),o=t.find(n.editBoxClass.dot().eachHas(n.inputSelector)).first().val(),a=t.data(t.find(n.inputSelector).first().attr("name")),r=t.find(n.editBoxClass.dot().eachHas(n.inputSelector)).first().attr("placeholder"),l=t.find(n.editBoxClass.dot().eachHas(n.inputSelector)).first().data("placeholder"),d=s||o||a||e.resolveToken(l)||r;t.find(n.contentClass.dot().join("span")).first().text(d)},setInputCollectionPlaceholders:function(e,n){var i=this;t(n).each(function(n,s){if("SELECT"===s.nodeName){t(s).find('option[selected="selected"]').removeAttr("selected");var o=t(s).find('option[value="'+e.data(t(s).attr("name"))+'"]');if(0!==o.length)o.attr("selected","selected");else{if(!e.data(t(s).attr("name")))return;t(s).append('<option value="'+e.data(t(s).attr("name"))+'">'+e.data(t(s).attr("name"))+"</option>")}}t(s).attr("placeholder",i.resolveToken(t(s).data("placeholder"),t(s))||t(s).attr("placeholder")),t(s).val(e.data(t(s).attr("name")))})},createNewListItem:function(e){var n=this,i=this.el,s=this.options,o=i.find(s.itemBlueprintClass.dot()).first().clone(),a=o.find(s.editBoxClass.dot()).find(s.inputSelector);o.remove=function(){var t=o.parents(n.options.itemClass.dot()).first();jQuery(this).remove(),n.unsetEmptyParent(t),jQuery.each(s.event.onItemRemoved,function(t,e){e(o)})},o.setParameter=function(e,n){o.data(s.paramsDataKey,t.extend(!0,o.data(s.paramsDataKey),{key:n}))},o.getParameter=function(t){return o.data(t)},t.each(e||{},function(t,e){o.data(t,e)}),o.data("id",o.data("id")||n.getHighestId()+1);var r=o.attr("class"),l=s.itemClass+r.replace(s.itemBlueprintClass,"");return o.attr("class",l),this.setInputCollectionPlaceholders(o,a),this.saveEditBoxInput(a),this.determineAndSetItemTitle(o),this.setInputCollectionPlaceholders(a),o.find(s.removeBtnClass.dot()).first().on("click",function(e){var n=t(this),i=n.data("confirm-class");if(i)if(n.hasClass(i))o.remove();else{n.addClass(i);setTimeout(function(){n.removeClass(i)},s.refuseConfirmDelay)}else o.remove(),s.event.onItemRemoved.forEach(function(t,n){t(o,e)})}),o.find(s.itemAddBtnClass.dot()).first().on("click",function(t){n.itemAddChildItem(o),s.event.onItemAdded.forEach(function(e,n){e(o,t)}),s.event.onItemAddChildItem.forEach(function(e,n){e(o,t)})}),o.find(".item-edit").first().get(0).addEventListener("click",n.clickStartEditEventHandler.bind(this)),n.options.select2.support&&(o.find("select").css("width",n.options.select2.selectWidth),o.find("select").select2(n.options.select2.params)),o.data(s.paramsDataKey,o.data(s.paramsDataKey)||{}),s.event.onCreateItem.forEach(function(t,e){var n=t(o,o.data());o="undefined"==typeof n?o:n}),o},itemAddChildItem:function(e){var n,i=this,s=i.options,o=i.createNewListItem();if(o){if(e.parents(s.listClass.dot()).length>s.maxDepth-1)return void s.event.onItemMaxDepth.forEach(function(t,e){t()});e.children(s.listClass.dot()).length?e.children(s.listClass.dot()).first().append(o):(n=t("<"+s.listNodeName+"/>").addClass(s.listClass),n.append(o),e.append(n)),i.setParent(e)}},getHighestId:function(){var e=this.options,n=this.el,i=0;return n.find(e.itemNodeName).each(function(e,n){var s=t(n).data("id");return s>i?i=s:void 0}),i},serialize:function(){this.options.event.onToJson.forEach(function(t,e){t()});var e,n=0,i=this;return step=function(e,n){var s=[],o=e.children(i.options.itemNodeName);return o.each(function(){var e=t(this),o=e.children(i.options.listNodeName),a={};t.each(e.data(),function(t,n){0!==t.indexOf("domenu_")&&(a[t]=e.data(t))});var r=t.extend({},a);o.length&&(r.children=step(o,n+1)),s.push(r)}),s},e=step(i.el.find(i.options.listNodeName).first(),n)},deserialize:function(e,n){var e=JSON.parse(e)||JSON.parse(this.options.data),i=this,s=this.options,o=i.el.find(s.listClass.dot()).first();n&&o.children().remove();var a=function(e,n){if(e.children){var o=t('<ol class="'+s.listClass+'"></ol>'),r=i.createNewListItem(e);if(!r)return;n.append(r),r.append(o),i.setParent(r,!0),jQuery.each(e.children,function(t,e){a(e,o)})}else{var r=i.createNewListItem(e);if(!r)return;n.append(r)}};jQuery.each(e,function(t,e){a(e,o)}),i.el.find(i.options.itemClass.dot()).each(function(e,n){t(n).data(i.options.paramsDataKey).collapsed&&i.collapseItem(t(n))}),this.options.event.onParseJson.forEach(function(t,e){t()})},serialise:function(){return this.serialize()},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0,distXtotal:0,distYtotal:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null},expandItem:function(e){e.removeClass(this.options.collapsedClass),e.children(this.options.listClass.dot()).children(this.options.itemClass.dot()).show(),e.children(this.options.expandBtnClass.dot()).hide(),e.children(this.options.collapseBtnClass.dot()).show(),e.data(this.options.paramsDataKey,t.extend(!0,e.data(this.options.paramsDataKey),{collapsed:!1})),this.options.event.onItemExpanded.forEach(function(t,n){t(e)})},collapseItem:function(e){e.addClass(this.options.collapsedClass),e.children(this.options.listClass.dot()).children(this.options.itemClass.dot()).hide(),e.children(this.options.collapseBtnClass.dot()).hide(),e.children(this.options.expandBtnClass.dot()).show(),e.data(this.options.paramsDataKey,t.extend(!0,e.data(this.options.paramsDataKey),{collapsed:!0})),this.options.event.onItemCollapsed.forEach(function(t,n){t(e)})},expandAll:function(e){var n=this,i=function(s){if(e&&e(s)){n.expandItem(s);var o=s.children(n.options.listNodeName);o.length&&jQuery.each(o,function(e,n){i(t(n))})}};n.el.find(this.options.collapsedClass.dot()).each(function(e,n){i(t(n))})},collapseAll:function(e){var n=this,i=function(s){if(e&&e(s)){var o=s.children(n.options.listNodeName);o.length&&(n.collapseItem(s),jQuery.each(o,function(e,n){i(t(n))}))}};n.el.find(n.options.listNodeName).children(n.options.itemClass.dot()).each(function(e,n){i(t(n))})},setParent:function(t,e){var n=this.options;if(t.children(this.options.listNodeName).length||e){t.children('[data-action="collapse"]').show();var i=t.find(this.options.handleClass.dot()).first().clone();t.find(this.options.handleClass.dot()).first().remove(),t.prepend(i)}t.children('[data-action="expand"]').hide(),n.event.onItemSetParent.forEach(function(e,n){e(t)})},unsetParent:function(t){var e=this.options;t.removeClass(this.options.collapsedClass),t.children("[data-action]").hide(),t.children(this.options.listNodeName).remove(),t.removeData("children"),e.event.onItemUnsetParent.forEach(function(e,n){e(t,event)})},unsetEmptyParent:function(t){var e=this;0===t.find(this.options.itemClass.dot()).length&&e.unsetParent(t)},dragStart:function(e){var s=this.mouse,o=this.options,a=t(e.target),r=a.closest(this.options.itemNodeName);if(!r.attr("class").match(o.noDragClass)){this.placeEl.css("height",r.height()),s.offsetX=e.offsetX!==i?e.offsetX:e.pageX-a.offset().left,s.offsetY=e.offsetY!==i?e.offsetY:e.pageY-a.offset().top,s.startX=s.lastX=e.pageX,s.startY=s.lastY=e.pageY,this.dragRootEl=this.el,this.dragEl=t(n.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",r.width()),r.after(this.placeEl),r[0].parentNode.removeChild(r[0]),r.appendTo(this.dragEl),t(n.body).append(this.dragEl),this.dragEl.css({left:e.pageX-s.offsetX,top:e.pageY-s.offsetY});var l,d,p=this.dragEl.find(this.options.itemNodeName);for(l=0;l<p.length;l++)d=t(p[l]).parents(this.options.listNodeName).length,d>this.dragDepth&&(this.dragDepth=d);this.options.event.onItemDrag.forEach(function(n,i){n(t(r),e)})}},dragStop:function(e){var n=this.dragEl.children(this.options.itemNodeName).first();n[0].parentNode.removeChild(n[0]),this.placeEl.replaceWith(n),this.dragEl.remove(),this.el.trigger("change"),this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset(),this.mouse.distXtotal=0,this.mouse.distYtotal=0,this.options.event.onItemDrop.forEach(function(i,s){i(t(n),e)}),t(n).parents(this.options.rootClass).data("domenu-id")!==t(this.el).data("domenu-id")&&t(n).parents(this.options.rootClass.dot()).domenu()._plugin.options.event.onItemDrop.forEach(function(t,i){t(n,e)})},dragMove:function(i){var s,o,a,l,d,p,h=!1,c=this.options,u=this.mouse;u.lastX=u.nowX||i.pageX,u.lastY=u.nowY||i.pageY,u.nowX=i.pageX,u.nowY=i.pageY,u.distX=u.nowX-u.lastX,u.distY=u.nowY-u.lastY,u.lastDirX=u.dirX,u.lastDirY=u.dirY,u.dirX=0===u.distX?0:u.distX>0?1:-1,u.dirY=0===u.distY?0:u.distY>0?1:-1;var f=Math.abs(this.placeEl.offset().top-this.dragEl.offset().top),m=Math.abs(this.placeEl.offset().left-this.dragEl.offset().left),v=2/Math.PI*Math.atan(Math.PI/2*(f+m)*.1/c.threshold);if(this.dragEl.css({left:i.pageX-u.offsetX,top:i.pageY-u.offsetY}),this.pointEl=t(n.elementFromPoint(i.pageX-n.body.scrollLeft,i.pageY-(e.pageYOffset||n.documentElement.scrollTop))),d=this.pointEl.closest(c.rootClass.dot()),p=this.dragRootEl.data("domenu-id")!==d.data("domenu-id"),d.length&&!p?this.placeEl.css({opacity:1}):this.placeEl.css({opacity:1-v}),d.length||!(v>.4)){var g=Math.abs(u.distX)>Math.abs(u.distY)&&Math.abs(u.distX-u.distY)>2?1:0;if(!u.moving)return u.dirAx=g,void(u.moving=!0);if(u.dirAx!==g?(u.distAxX=0,u.distAxY=0):(u.distAxX+=Math.abs(u.distX),0!==u.dirX&&u.dirX!==u.lastDirX&&(u.distAxX=0),u.distAxY+=Math.abs(u.distY),0!==u.dirY&&u.dirY!==u.lastDirY&&(u.distAxY=0)),u.dirAx=g,u.dirAx&&u.distAxX>=c.threshold&&(u.distAxX=0,a=this.placeEl.prev(c.itemNodeName),u.distX>0&&a.length&&!a.hasClass(c.collapsedClass)&&(s=a.find(c.listNodeName).last(),l=this.placeEl.parents(c.listNodeName).length,l+this.dragDepth<=c.maxDepth?s.length?(s=a.children(c.listNodeName).last(),s.append(this.placeEl)):(s=t("<"+c.listNodeName+"/>").addClass(c.listClass),s.append(this.placeEl),a.append(s),this.setParent(a)):l+this.dragDepth>c.maxDepth&&c.event.onItemMaxDepth.forEach(function(t,e){t(a)}))),r||(this.dragEl[0].style.visibility="hidden"),this.el.children(this.options.listClass.dot()).length||this.el.append(t("<"+this.options.listNodeName+"/>").attr("class",this.options.listClass)),this.options.allowListMerging!==!0){if(p&&this.options.allowListMerging===!1)return;if(p&&d.data("domenu")&&-1===d.data("domenu").options.allowListMerging.indexOf(this.el.attr("id")))return}if(this.pointEl.hasClass(c.listClass)&&!this.pointEl.children(c.itemClass.dot()).length&&this.pointEl.append(this.placeEl),this.pointEl.parents(c.rootClass.dot()).length&&!this.pointEl.hasClass(c.listClass)&&!this.pointEl.hasClass(c.placeClass)){if(this.pointEl.hasClass(c.itemClass)||(this.pointEl=t(this.pointEl).parents(c.itemClass.dot()).first()),r||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(c.handleClass)&&(this.pointEl=this.pointEl.parent(c.itemNodeName)),this.pointEl.hasClass(c.emptyClass))h=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(c.itemClass))return;if(!u.dirAx||p||h){if(p)return;l=this.dragDepth-1+this.pointEl.parents(c.listNodeName).length,o=this.placeEl.parent(),l>c.maxDepth&&c.event.onItemMaxDepth.forEach(function(t,e){t(this.dragEl)});var E=i.pageY<this.pointEl.offset().top+this.pointEl.height()/2;h?(s=t(n.createElement(c.listNodeName)).addClass(c.listClass),s.append(this.placeEl),this.pointEl.replaceWith(s)):E?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),o.children().length||this.unsetEmptyParent(o.parent()),this.dragRootEl.find(c.itemNodeName).length||this.dragRootEl.append('<div class="'+c.emptyClass+'"/>'),p&&(this.dragRootEl=d,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}}}},o.prototype={getLists:function(){return this._lists},parseJson:function(t,e){var t=t||null,e=e||!1;return this._plugin.deserialize(t,e),this},toJson:function(){var t=this._plugin.serialize();return JSON.stringify(t)},expandAll:function(){return this._plugin.expandAll(function(){return!0}),this},collapseAll:function(){return this._plugin.collapseAll(function(){return!0}),this},expand:function(t){return this._plugin.expandAll(t),this},collapse:function(t){return this._plugin.collapseAll(t),this},onParseJson:function(t){var e=this;return e._plugin.options.event.onParseJson.push(t.bind(e)),e},onItemSetParent:function(t){var e=this;return e._plugin.options.event.onItemSetParent.push(t.bind(e)),e},onItemUnsetParent:function(t){var e=this;return e._plugin.options.event.onItemUnsetParent.push(t.bind(e)),e},onToJson:function(t){var e=this;return e._plugin.options.event.onToJson.push(t.bind(e)),e},onSaveEditBoxInput:function(t){var e=this;return e._plugin.options.event.onSaveEditBoxInput.push(t.bind(e)),e},onItemDrag:function(t){var e=this;return e._plugin.options.event.onItemDrag.push(t.bind(e)),e},onItemDrop:function(t){var e=this;return e._plugin.options.event.onItemDrop.push(t.bind(e)),e},onItemAdded:function(t){var e=this;return e._plugin.options.event.onItemAdded.push(t.bind(e)),e},onItemRemoved:function(t){var e=this;return this._plugin.options.event.onItemRemoved.push(t.bind(e)),e},onItemStartEdit:function(t){var e=this;return this._plugin.options.event.onItemStartEdit.push(t.bind(e)),e},onItemEndEdit:function(t){var e=this;return this._plugin.options.event.onItemEndEdit.push(t.bind(e)),e},onItemAddChildItem:function(t){var e=this;return this._plugin.options.event.onItemAddChildItem.push(t.bind(e)),e},onCreateItem:function(t){var e=this;return this._plugin.options.event.onCreateItem.push(t.bind(e)),e},onItemCollapsed:function(t){var e=this;return this._plugin.options.event.onItemCollapsed.push(t.bind(e)),e},onItemExpanded:function(t){var e=this;return this._plugin.options.event.onItemExpanded.push(t.bind(e)),e},onItemMaxDepth:function(t){var e=this;return this._plugin.options.event.onItemMaxDepth.push(t.bind(e)),e},on:function(t,e){var n=this;return"object"==typeof t?t.forEach(function(t,i){n._plugin.options.event[t].push(e.bind(n))}):"*"===t?Object.keys(n._plugin.options.event).forEach(function(t,i){n._plugin.options.event[t].push(e.bind(n))}):"string"==typeof t&&n._plugin.options.event[t].push(e.bind(n)),n},getListNodes:function(){var t=this._plugin.options,e=this._plugin.el.find(t.listNodeName);return e},getPluginOptions:function(){return this._plugin.options}},t.fn.domenu=function(e){var n=this.first(),i=t(this),a=i.data("domenu")||new s(this,e),r=new o(a,n);if(e&&(a.options=t.extend(!0,{},l,e)),(!i.data("domenu")||e)&&i.data("domenu",a),!i.data("domenu-id")){var d=Math.random().toString().replace(/\D/g,"");i.data("domenu-id",d)}return r||a}}(window.jQuery||window.Zepto,window,document);